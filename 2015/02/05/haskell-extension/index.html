<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>A tour of IHaskell extensions</title>
    <meta name="generator" content="VuePress 1.5.1">
    <link rel="alternate" type="application/rss+xml" href="https://github.com/mawuen/mawuen.github.io/rss.xml" title=" RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://github.com/mawuen/mawuen.github.io/feed.atom" title=" Atom Feed">
    <link rel="alternate" type="application/json" href="https://github.com/mawuen/mawuen.github.io/feed.json" title=" JSON Feed">
    <meta name="description" content="we're going to updating the installation of IHaskell...">
    <link rel="preload" href="/assets/css/0.styles.876c9db6.css" as="style"><link rel="preload" href="/assets/js/app.a645ad51.js" as="script"><link rel="preload" href="/assets/js/7.975a3fea.js" as="script"><link rel="preload" href="/assets/js/3.f5cf5793.js" as="script"><link rel="preload" href="/assets/js/43.0cf3c2e7.js" as="script"><link rel="preload" href="/assets/js/5.99340dc9.js" as="script"><link rel="preload" href="/assets/js/8.49b41bc0.js" as="script"><link rel="prefetch" href="/assets/js/10.579ce7f1.js"><link rel="prefetch" href="/assets/js/11.ecbd9bed.js"><link rel="prefetch" href="/assets/js/12.02337c42.js"><link rel="prefetch" href="/assets/js/13.e04dcf2c.js"><link rel="prefetch" href="/assets/js/14.c23b369d.js"><link rel="prefetch" href="/assets/js/15.f769c986.js"><link rel="prefetch" href="/assets/js/16.945d8815.js"><link rel="prefetch" href="/assets/js/17.019422ee.js"><link rel="prefetch" href="/assets/js/18.c355553e.js"><link rel="prefetch" href="/assets/js/19.6a327668.js"><link rel="prefetch" href="/assets/js/20.dc2f6bd0.js"><link rel="prefetch" href="/assets/js/21.d60f0ff2.js"><link rel="prefetch" href="/assets/js/22.c68e7bae.js"><link rel="prefetch" href="/assets/js/23.c5bb46d4.js"><link rel="prefetch" href="/assets/js/24.db0f1261.js"><link rel="prefetch" href="/assets/js/25.30e7b88e.js"><link rel="prefetch" href="/assets/js/26.d142ab7a.js"><link rel="prefetch" href="/assets/js/27.24400179.js"><link rel="prefetch" href="/assets/js/28.16c1a16a.js"><link rel="prefetch" href="/assets/js/29.1203313f.js"><link rel="prefetch" href="/assets/js/30.fbd26ff2.js"><link rel="prefetch" href="/assets/js/31.02f13194.js"><link rel="prefetch" href="/assets/js/32.54a64be8.js"><link rel="prefetch" href="/assets/js/33.6819dc83.js"><link rel="prefetch" href="/assets/js/34.366138a9.js"><link rel="prefetch" href="/assets/js/35.2bec441d.js"><link rel="prefetch" href="/assets/js/36.573b7e7d.js"><link rel="prefetch" href="/assets/js/37.c2eb4227.js"><link rel="prefetch" href="/assets/js/38.14a494ee.js"><link rel="prefetch" href="/assets/js/39.dea4d93d.js"><link rel="prefetch" href="/assets/js/4.24606bc3.js"><link rel="prefetch" href="/assets/js/40.0a227135.js"><link rel="prefetch" href="/assets/js/41.693a5f9d.js"><link rel="prefetch" href="/assets/js/42.71276254.js"><link rel="prefetch" href="/assets/js/44.9f4b29b6.js"><link rel="prefetch" href="/assets/js/45.b7615705.js"><link rel="prefetch" href="/assets/js/46.c90fabcc.js"><link rel="prefetch" href="/assets/js/47.fc85cd96.js"><link rel="prefetch" href="/assets/js/48.6bbbd27b.js"><link rel="prefetch" href="/assets/js/49.49dfc775.js"><link rel="prefetch" href="/assets/js/50.4c44001f.js"><link rel="prefetch" href="/assets/js/51.fbe8c48f.js"><link rel="prefetch" href="/assets/js/52.95443945.js"><link rel="prefetch" href="/assets/js/53.0852a3b5.js"><link rel="prefetch" href="/assets/js/54.d5befe81.js"><link rel="prefetch" href="/assets/js/55.d34ff416.js"><link rel="prefetch" href="/assets/js/56.bd61a197.js"><link rel="prefetch" href="/assets/js/57.1f834384.js"><link rel="prefetch" href="/assets/js/58.44c14f26.js"><link rel="prefetch" href="/assets/js/59.844eb11b.js"><link rel="prefetch" href="/assets/js/6.ae161697.js"><link rel="prefetch" href="/assets/js/60.37a25e3f.js"><link rel="prefetch" href="/assets/js/61.ed0252cb.js"><link rel="prefetch" href="/assets/js/62.d6c354b3.js"><link rel="prefetch" href="/assets/js/63.df20062e.js"><link rel="prefetch" href="/assets/js/64.fdc86c44.js"><link rel="prefetch" href="/assets/js/65.a45bc5bb.js"><link rel="prefetch" href="/assets/js/66.6f4ff24e.js"><link rel="prefetch" href="/assets/js/67.a5d24b59.js"><link rel="prefetch" href="/assets/js/68.561f1a1c.js"><link rel="prefetch" href="/assets/js/69.3666161a.js"><link rel="prefetch" href="/assets/js/70.1c5e56f9.js"><link rel="prefetch" href="/assets/js/71.90188632.js"><link rel="prefetch" href="/assets/js/72.8615a90f.js"><link rel="prefetch" href="/assets/js/73.8b5ad8b7.js"><link rel="prefetch" href="/assets/js/9.500b2e32.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.04ae42ee.js">
    <link rel="stylesheet" href="/assets/css/0.styles.876c9db6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><nav class="navbar navbar-expand-md navbar-light bg-white fixed-top"><div class="container"><a href="/" class="navbar-brand"><img src="/assets/img/logo.png">  </a> <button type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler"><span class="navbar-toggler-icon"></span></button> <div id="navbarsExampleDefault" class="collapse navbar-collapse"><ul class="navbar-nav ml-auto"><li class="nav-item"><a href="/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li><li class="nav-item"><a href="/about.html" class="nav-link">About me</a></li> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <a href="./rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></ul></div></div></nav></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="mobile-home-link navbar-brand"><img src="/assets/img/logo.png">  </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/">Blog</a></li><li class="mobile-nav-item"><a href="/tag/">Tags</a></li><li class="mobile-nav-item"><a href="/about.html">About me</a></li> <li class="mobile-nav-item"><a href="./rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></li></ul></div></div></div> <div class="container wrapmain"><div id="vuepress-theme-blog__post-layout" data-v-1c1f12bb><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content" data-v-1c1f12bb><div class="row justify-content-center" data-v-1c1f12bb><div class="col-md-8" data-v-1c1f12bb><header data-v-1c1f12bb><span class="text-muted" data-v-1c1f12bb><div class="post-meta" data-v-1c1f12bb><!----> <div class="post-meta-date"><time pubdate itemprop="datePublished" datetime="2015-02-05T00:00:00.000Z">
Thu, Feb 05 2015
</time></div> <!----></div></span> <h1 itemprop="name headline" class="article-head mt-3" data-v-1c1f12bb>
  A tour of IHaskell extensions
  </h1> <p class="lead" data-v-1c1f12bb>we're going to updating the installation of IHaskell...</p> <div data-v-1c1f12bb><span><div class="d-flex align-items-center"><a class="profile-avatar"><!----></a> <!----></div></span><span><div class="d-flex align-items-center"><a class="profile-avatar"><!----></a> <!----></div></span><span><div class="d-flex align-items-center"><a class="profile-avatar"><img src="/assets/img/mic.jpg" alt="Michael KAMM" class="avatar-image"></a> <div><span>Michael KAMM</span>  
      <a href="https://twitter.com/GnOtaku" target="_blank" rel="noopener noreferrer" class="external btn btn-sm btn-outline-dark">Follow</a></div></div></span></div></header></div></div> <div class="row justify-content-center text-center mt-4 mb-40" data-v-1c1f12bb><div class="col-md-9" data-v-1c1f12bb><img src="/assets/posts/haskell.jpeg" class="featuredimg" data-v-1c1f12bb></div></div> <div class="row justify-content-center" data-v-1c1f12bb><div class="col-md-8" data-v-1c1f12bb><div itemprop="articleBody" class="content__default" data-v-1c1f12bb><h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>In my previous <a href="https://mawuen.github.io/2012/02/05/installing-haskell-on-ubuntu-14-with-stack/" target="_blank" rel="noopener noreferrer">post<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,
I tried to provide a step-by-step explanation of how to install
<a href="https://github.com/gibiansky/IHaskell" target="_blank" rel="noopener noreferrer">IHaskell<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> on Ubuntu 14.04 (Should also
work on other versions). Now is time to start using it!</p> <p>This post is not a quickstart on how to use IHaskell, as it has already been
covered in the <a href="https://github.com/gibiansky/IHaskell/blob/master/notebooks/IHaskell.ipynb" target="_blank" rel="noopener noreferrer">official documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
And there are more advanced examples here:</p> <ul><li><a href="https://github.com/gibiansky/IHaskell/blob/master/notebooks/Conjugate%20Gradient.ipynb" target="_blank" rel="noopener noreferrer">Conjugate Gradient<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/gibiansky/IHaskell/blob/master/notebooks/Gradient-Descent.ipynb" target="_blank" rel="noopener noreferrer">Gradient Descent<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/gibiansky/IHaskell/blob/master/notebooks/Homophones.ipynb" target="_blank" rel="noopener noreferrer">Homophones<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/gibiansky/IHaskell/blob/master/notebooks/Static%20Canvas%20IHaskell%20Display.ipynb" target="_blank" rel="noopener noreferrer">Static Canvas IHaskell Display<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>Instead, I'll focus more on something a bit more mysterious for me:
<em>displaying custom Haskell types in notebooks</em>. I'll first try to give a
quick explanation on how it works, and then give basic examples of the
provided integrations with existing libraries (aeson, blaze, charts,
diagrams, etc.). I'll also try to show how to support your custom types.</p> <p><strong>Disclaimer</strong>: Some of the information found in the post may be
redundant with other sources (like official documentation, and in
particular the last post in the list above: <em>Static Canvas IHaskell
Display</em>), but I hope this post will bring value by giving an overview
of what is possible with <em>IHaskell</em>, explained with the words of a
newcomer. Comments and fixes would be greatly appreciated!</p> <h2 id="how-does-it-work"><a href="#how-does-it-work" class="header-anchor">#</a> How does it work?</h2> <p>Jupyter allows you to embed arbitrary HTML, and this mechanism is used
by IHaskell to display values in custom ways. The <code>IHaskellDisplay</code>
typeclass is used to this effect. By providing an instance for
your own types, they can be displayed in notebooks (we'll see
later that some extensions already exist to provide such display
to known Haskell libraries). A <code>Display</code> can be of several types,
but for now we will focus on <code>html</code> and <code>plain</code> (see <a href="https://github.com/gibiansky/IHaskell/blob/master/notebooks/Static%20Canvas%20IHaskell%20Display.ipynb" target="_blank" rel="noopener noreferrer">this notebook<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for more information).</p> <p>Note that you can provide several choices of display outputs so that
your custom type can be display in notebooks <em>(html)</em> or console <em>(plain
text)</em>, the frontend will then select the best choice.</p> <div class="language-haskell extra-class"><pre class="language-haskell"><code><span class="token import_statement"><span class="token keyword">import</span> IHaskell.Display</span>

<span class="token comment">-- Custom data type</span>
<span class="token keyword">data</span> <span class="token constant">Answer</span> <span class="token operator">=</span> <span class="token constant">Answer</span>

<span class="token comment">-- Make it &quot;displayable&quot;</span>
<span class="token keyword">instance</span> <span class="token constant">IHaskellDisplay</span> <span class="token constant">Answer</span> <span class="token keyword">where</span>
    <span class="token comment">-- List of two kinds of Display: html and plain text</span>
    <span class="token hvariable">display</span> <span class="token hvariable">value</span> <span class="token operator">=</span> <span class="token builtin">return</span> <span class="token operator">$</span> <span class="token constant">Display</span> <span class="token punctuation">[</span><span class="token hvariable">htmlDisplay</span><span class="token punctuation">,</span> <span class="token hvariable">txtDisplay</span><span class="token punctuation">]</span>
        <span class="token keyword">where</span>
            <span class="token comment">-- HTML Display</span>
            <span class="token hvariable">htmlDisplay</span> <span class="token operator">=</span> <span class="token hvariable">html</span> <span class="token string">&quot;&lt;div&gt;The answer is 42!&lt;/div&gt;&quot;</span>
            <span class="token comment">-- Plain Text Display</span>
            <span class="token hvariable">txtDisplay</span> <span class="token operator">=</span> <span class="token hvariable">plain</span> <span class="token string">&quot;42&quot;</span>

<span class="token comment">-- Display an instance of our type</span>
<span class="token constant">Answer</span>
</code></pre></div><blockquote><div class="language-sh extra-class"><pre class="language-sh"><code>The answer is <span class="token number">42</span><span class="token operator">!</span>
</code></pre></div></blockquote> <p>In the following sections we'll see how to use some of the extensions
officially provided by <em>IHaskell</em> to display types of known libraries.
The packages we'll need are:</p> <ul><li>ihaskell-basic</li> <li>ihaskell-aeson</li> <li>ihaskell-blaze</li> <li>ihaskell-charts</li> <li>ihaskell-diagrams</li> <li>ihaskell-magic</li></ul> <p>You can install them using stack if you intend to try this out yourself:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>stack build             <span class="token punctuation">\</span>
    ihaskell-basic      <span class="token punctuation">\</span>
    ihaskell-aeson      <span class="token punctuation">\</span>
    ihaskell-blaze      <span class="token punctuation">\</span>
    ihaskell-charts     <span class="token punctuation">\</span>
    ihaskell-diagrams   <span class="token punctuation">\</span>
    ihaskell-magic
</code></pre></div><h2 id="ihaskell-basic"><a href="#ihaskell-basic" class="header-anchor">#</a> ihaskell-basic</h2> <p>IHaskell <a href="https://hackage.haskell.org/package/ihaskell-basic" target="_blank" rel="noopener noreferrer">basic<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> contains
<em>&quot;Instances of IHaskellDisplay for default prelude data types&quot;</em>. Currently,
only <code>Maybe</code> seems to be supported. Maybe some more <em>Displays</em> will be provided
in the future?</p> <p>Anyway, here is how you can use it, and what it looks like:</p> <div class="language-haskell extra-class"><pre class="language-haskell"><code><span class="token comment">-- import IHaskell.Display.Basic</span>
<span class="token constant">Just</span> <span class="token number">42</span>
<span class="token constant">Just</span> <span class="token punctuation">(</span><span class="token constant">Just</span> <span class="token string">&quot;Foo Bar Baz&quot;</span><span class="token punctuation">)</span>
<span class="token constant">Nothing</span>
</code></pre></div><blockquote><div class="language-haskell extra-class"><pre class="language-haskell"><code><span class="token constant">Just</span> <span class="token number">42</span>
<span class="token constant">Just</span> <span class="token constant">Just</span> <span class="token string">&quot;Foo Bar Baz&quot;</span>
<span class="token constant">Nothing</span>
</code></pre></div></blockquote> <h2 id="ihaskell-aeson"><a href="#ihaskell-aeson" class="header-anchor">#</a> ihaskell-aeson</h2> <p><a href="https://hackage.haskell.org/package/aeson" target="_blank" rel="noopener noreferrer">Aeson<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a library used to
manipulate <em>JSON</em> format from Haskell. It allows you to use <code>ToJSON</code> and
<code>FromJSON</code> typeclasses to convert your custom data-types <em>to</em> and <em>from</em>
JSON format.</p> <p>In our small example, we declare a type of document with an arbitrary
number of metadata attached, here is how we could do it:</p> <div class="language-haskell extra-class"><pre class="language-haskell"><code><span class="token operator">:</span><span class="token hvariable">extension</span> <span class="token constant">OverloadedStrings</span>

<span class="token import_statement"><span class="token keyword">import</span> <span class="token keyword">qualified</span> Data.Text <span class="token keyword">as</span> T</span>
<span class="token import_statement"><span class="token keyword">import</span> <span class="token keyword">qualified</span> Data.Aeson <span class="token keyword">as</span> A</span>
<span class="token comment">-- IHaskell.Display.Aeson</span>

<span class="token keyword">newtype</span> <span class="token constant">Property</span> <span class="token operator">=</span> <span class="token constant">Property</span> <span class="token constant">T.Text</span>
<span class="token keyword">newtype</span> <span class="token constant">Value</span> <span class="token operator">=</span> <span class="token constant">Value</span> <span class="token constant">T.Text</span>
<span class="token keyword">data</span> <span class="token constant">Metadata</span> <span class="token operator">=</span> <span class="token constant">Metadata</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token constant">Property</span><span class="token punctuation">,</span> <span class="token constant">Value</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token keyword">newtype</span> <span class="token constant">Body</span> <span class="token operator">=</span> <span class="token constant">Body</span> <span class="token constant">T.Text</span>
<span class="token keyword">newtype</span> <span class="token constant">Title</span> <span class="token operator">=</span> <span class="token constant">Title</span> <span class="token constant">T.Text</span>
<span class="token keyword">data</span> <span class="token constant">Document</span>  <span class="token operator">=</span> <span class="token constant">Document</span>
    <span class="token punctuation">{</span> <span class="token hvariable">_title</span> <span class="token operator">::</span> <span class="token constant">Title</span>
    <span class="token punctuation">,</span> <span class="token hvariable">_body</span> <span class="token operator">::</span> <span class="token constant">Body</span>
    <span class="token punctuation">,</span> <span class="token hvariable">_metadata</span> <span class="token operator">::</span> <span class="token constant">Metadata</span><span class="token punctuation">}</span>

<span class="token keyword">instance</span> <span class="token constant">A.ToJSON</span> <span class="token constant">Metadata</span> <span class="token keyword">where</span>
   <span class="token hvariable">toJSON</span> <span class="token punctuation">(</span><span class="token constant">Metadata</span> <span class="token hvariable">d</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">A.object</span> <span class="token operator">$</span> <span class="token punctuation">[</span><span class="token hvariable">p</span> <span class="token constant">A</span><span class="token operator">..=</span> <span class="token hvariable">v</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token constant">Property</span> <span class="token hvariable">p</span><span class="token punctuation">,</span> <span class="token constant">Value</span> <span class="token hvariable">v</span><span class="token punctuation">)</span> <span class="token operator">&lt;-</span> <span class="token hvariable">d</span><span class="token punctuation">]</span>

<span class="token keyword">instance</span> <span class="token constant">A.ToJSON</span> <span class="token constant">Document</span> <span class="token keyword">where</span>
   <span class="token hvariable">toJSON</span> <span class="token punctuation">(</span><span class="token constant">Document</span> <span class="token punctuation">(</span><span class="token constant">Title</span> <span class="token hvariable">t</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token constant">Body</span> <span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token hvariable">m</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">A.object</span> <span class="token punctuation">[</span>
       <span class="token string">&quot;title&quot;</span> <span class="token constant">A</span><span class="token operator">..=</span> <span class="token hvariable">t</span><span class="token punctuation">,</span>
       <span class="token string">&quot;body&quot;</span> <span class="token constant">A</span><span class="token operator">..=</span> <span class="token hvariable">b</span><span class="token punctuation">,</span>
       <span class="token string">&quot;metadata&quot;</span> <span class="token constant">A</span><span class="token operator">..=</span> <span class="token hvariable">A.toJSON</span> <span class="token hvariable">m</span><span class="token punctuation">]</span>

<span class="token hvariable">document</span> <span class="token operator">=</span> <span class="token keyword">let</span> <span class="token hvariable">body</span> <span class="token operator">=</span> <span class="token constant">Body</span> <span class="token string">&quot;Lorem Ipsum&quot;</span>
               <span class="token hvariable">title</span> <span class="token operator">=</span> <span class="token constant">Title</span> <span class="token string">&quot;Foo Bar&quot;</span>
               <span class="token hvariable">metadata</span> <span class="token operator">=</span> <span class="token constant">Metadata</span> <span class="token punctuation">[</span>
                   <span class="token punctuation">(</span><span class="token constant">Property</span> <span class="token string">&quot;Encoding&quot;</span><span class="token punctuation">,</span> <span class="token constant">Value</span> <span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                   <span class="token punctuation">(</span><span class="token constant">Property</span> <span class="token string">&quot;Author&quot;</span><span class="token punctuation">,</span> <span class="token constant">Value</span> <span class="token string">&quot;Jonh Doe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
           <span class="token keyword">in</span> <span class="token constant">Document</span> <span class="token punctuation">{</span><span class="token hvariable">_title</span><span class="token operator">=</span><span class="token hvariable">title</span><span class="token punctuation">,</span> <span class="token hvariable">_body</span><span class="token operator">=</span><span class="token hvariable">body</span><span class="token punctuation">,</span> <span class="token hvariable">_metadata</span><span class="token operator">=</span><span class="token hvariable">metadata</span> <span class="token punctuation">}</span>

<span class="token constant">A.Null</span>
<span class="token constant">A.Bool</span> <span class="token constant">True</span>
<span class="token hvariable">A.toJSON</span> <span class="token hvariable">document</span>
</code></pre></div><blockquote><div class="language-haskell extra-class"><pre class="language-haskell"><code><span class="token builtin">null</span>

<span class="token hvariable">true</span>

<span class="token punctuation">{</span>
    <span class="token string">&quot;body&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Lorem Ipsum&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;metadata&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;Author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Jonh Doe&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;Encoding&quot;</span><span class="token operator">:</span> <span class="token string">&quot;UTF-8&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Foo Bar&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div></blockquote> <h2 id="ihaskell-blaze"><a href="#ihaskell-blaze" class="header-anchor">#</a> ihaskell-blaze</h2> <p><a href="https://hackage.haskell.org/package/blaze-html" target="_blank" rel="noopener noreferrer">Blaze<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a fast combinator library used to assemble <em>HTML</em> documents directly in Haskell code <em>(<a href="https://wiki.haskell.org/Embedded_domain_specific_language" target="_blank" rel="noopener noreferrer">Embedded Domain Specific Language<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</em>. According to the official description, <em>&quot;the project is aimed at those who seek to write web applications in Haskell – it integrates well with all Haskell web frameworks.&quot;</em></p> <div class="language-haskell extra-class"><pre class="language-haskell"><code><span class="token comment">-- This example if from the IHaskell official introduction</span>
<span class="token operator">:</span><span class="token hvariable">extension</span> <span class="token constant">OverloadedStrings</span>

<span class="token comment">-- import IHaskell.Display.Blaze</span>
<span class="token import_statement"><span class="token keyword">import</span> Control.Monad</span>
<span class="token import_statement"><span class="token keyword">import</span> Prelude <span class="token keyword">hiding</span></span> <span class="token punctuation">(</span><span class="token builtin">div</span><span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">)</span>
<span class="token import_statement"><span class="token keyword">import</span> <span class="token keyword">qualified</span> Text.Blaze.Html4.Strict <span class="token keyword">as</span> B</span>
<span class="token import_statement"><span class="token keyword">import</span> <span class="token keyword">qualified</span> Text.Blaze.Html4.Strict.Attributes <span class="token keyword">as</span> A</span>

<span class="token hvariable">forM</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">$</span> <span class="token operator">\</span><span class="token hvariable">size</span> <span class="token operator">-&gt;</span> <span class="token keyword">do</span>
  <span class="token keyword">let</span> <span class="token hvariable">s</span> <span class="token operator">=</span> <span class="token hvariable">B.toValue</span> <span class="token operator">$</span> <span class="token hvariable">size</span> <span class="token operator">*</span> <span class="token number">70</span>
  <span class="token hvariable">B.img</span> <span class="token constant">B</span><span class="token operator">.!</span> <span class="token hvariable">A.src</span> <span class="token string">&quot;https://www.google.com/images/srpr/logo11w.png&quot;</span> <span class="token constant">B</span><span class="token operator">.!</span> <span class="token hvariable">A.width</span> <span class="token hvariable">s</span>
</code></pre></div><img src="/assets/posts/google-logo.png" width="70"> <img src="/assets/posts/google-logo.png" width="140"> <img src="/assets/posts/google-logo.png" width="210"> <img src="/assets/posts/google-logo.png" width="280"> <img src="/assets/posts/google-logo.png" width="350"> <h2 id="ihaskell-charts"><a href="#ihaskell-charts" class="header-anchor">#</a> ihaskell-charts</h2> <p><a href="https://hackage.haskell.org/package/Chart" target="_blank" rel="noopener noreferrer">Charts<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a <em>&quot;2D charting library for haskell&quot;</em>. Here a two examples taken from the <a href="https://github.com/timbod7/haskell-chart/wiki" target="_blank" rel="noopener noreferrer">official wiki<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> on github. To adapt examples to notebooks, you must replace any reference of <code>toFile</code>, etc. by <code>toRenderable</code>.</p> <div class="language-haskell extra-class"><pre class="language-haskell"><code><span class="token comment">-- This example is taken from the wiki: https://github.com/timbod7/haskell-chart/wiki/example%205</span>
<span class="token import_statement"><span class="token keyword">import</span> <span class="token keyword">qualified</span> Graphics.Rendering.Chart.Easy <span class="token keyword">as</span> E</span>

<span class="token hvariable">values</span> <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token constant">String</span><span class="token punctuation">,</span> <span class="token constant">Double</span><span class="token punctuation">,</span> <span class="token constant">Bool</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token hvariable">values</span> <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token punctuation">(</span><span class="token string">&quot;Mexico City&quot;</span><span class="token punctuation">,</span> <span class="token number">19.2</span><span class="token punctuation">,</span> <span class="token constant">False</span><span class="token punctuation">)</span>
         <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">&quot;Mumbai&quot;</span><span class="token punctuation">,</span> <span class="token number">12.9</span><span class="token punctuation">,</span> <span class="token constant">False</span><span class="token punctuation">)</span>
         <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">&quot;Sydney&quot;</span><span class="token punctuation">,</span> <span class="token number">4.3</span><span class="token punctuation">,</span> <span class="token constant">False</span><span class="token punctuation">)</span>
         <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">&quot;London&quot;</span><span class="token punctuation">,</span> <span class="token number">8.3</span><span class="token punctuation">,</span> <span class="token constant">False</span><span class="token punctuation">)</span>
         <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">&quot;New York&quot;</span><span class="token punctuation">,</span><span class="token number">8.2</span><span class="token punctuation">,</span><span class="token constant">True</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token hvariable">pitem</span> <span class="token punctuation">(</span><span class="token hvariable">s</span><span class="token punctuation">,</span> <span class="token hvariable">v</span><span class="token punctuation">,</span> <span class="token hvariable">o</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">E.pitem_value</span> <span class="token constant">E</span><span class="token operator">..~</span> <span class="token hvariable">v</span>
              <span class="token operator">$</span> <span class="token hvariable">E.pitem_label</span> <span class="token constant">E</span><span class="token operator">..~</span> <span class="token hvariable">s</span>
              <span class="token operator">$</span> <span class="token hvariable">E.pitem_offset</span> <span class="token constant">E</span><span class="token operator">..~</span> <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token hvariable">o</span> <span class="token keyword">then</span> <span class="token number">25</span> <span class="token keyword">else</span> <span class="token number">0</span><span class="token punctuation">)</span>
              <span class="token operator">$</span> <span class="token hvariable">E.def</span>

<span class="token hvariable">E.toRenderable</span>
  <span class="token operator">$</span> <span class="token hvariable">E.pie_title</span> <span class="token constant">E</span><span class="token operator">..~</span> <span class="token string">&quot;Relative Population&quot;</span>
  <span class="token operator">$</span> <span class="token hvariable">E.pie_plot</span><span class="token operator"> . </span><span class="token hvariable">E.pie_data</span> <span class="token constant">E</span><span class="token operator">..~</span> <span class="token builtin">map</span> <span class="token hvariable">pitem</span> <span class="token hvariable">values</span>
  <span class="token operator">$</span> <span class="token hvariable">E.def</span>
</code></pre></div><p><img src="/assets/posts/ihaskell-chart.svg" alt="pie chart"></p> <div class="language-haskell extra-class"><pre class="language-haskell"><code><span class="token comment">-- This example is taken from the wiki: https://github.com/timbod7/haskell-chart/wiki/example%2012</span>
<span class="token import_statement"><span class="token keyword">import</span> <span class="token keyword">qualified</span> Graphics.Rendering.Chart.Easy <span class="token keyword">as</span> E</span>

<span class="token hvariable">r</span>' <span class="token hvariable">x</span> <span class="token hvariable">y</span> <span class="token hvariable">z</span> <span class="token operator">=</span> <span class="token builtin">sqrt</span> <span class="token operator">$</span> <span class="token hvariable">x</span><span class="token operator">^</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token hvariable">y</span><span class="token operator">^</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token hvariable">z</span><span class="token operator">^</span><span class="token number">2</span>
<span class="token hvariable">efield</span> <span class="token hvariable">sign</span> <span class="token hvariable">x</span> <span class="token hvariable">y</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token hvariable">sign</span> <span class="token operator">*</span> <span class="token hvariable">x</span> <span class="token operator">/</span> <span class="token hvariable">r</span><span class="token punctuation">,</span> <span class="token hvariable">sign</span> <span class="token operator">*</span> <span class="token hvariable">y</span> <span class="token operator">/</span> <span class="token hvariable">r</span><span class="token punctuation">)</span> <span class="token keyword">where</span> <span class="token hvariable">r</span> <span class="token operator">=</span> <span class="token hvariable">r</span>' <span class="token hvariable">x</span> <span class="token hvariable">y</span> <span class="token number">10</span>
<span class="token hvariable">bfield</span> <span class="token hvariable">sign</span> <span class="token hvariable">x</span> <span class="token hvariable">y</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token hvariable">sign</span> <span class="token operator">*</span> <span class="token hvariable">y</span> <span class="token operator">/</span> <span class="token hvariable">r</span><span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token hvariable">sign</span> <span class="token operator">*</span> <span class="token hvariable">x</span> <span class="token operator">/</span> <span class="token hvariable">r</span><span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">where</span> <span class="token hvariable">r</span> <span class="token operator">=</span> <span class="token hvariable">r</span>' <span class="token hvariable">x</span> <span class="token hvariable">y</span> <span class="token number">10</span>
<span class="token hvariable">square</span> <span class="token hvariable">a</span> <span class="token hvariable">s</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token punctuation">,</span> <span class="token hvariable">y</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token hvariable">x</span> <span class="token operator">&lt;-</span> <span class="token builtin">range</span><span class="token punctuation">,</span> <span class="token hvariable">y</span> <span class="token operator">&lt;-</span> <span class="token builtin">range</span><span class="token punctuation">]</span> <span class="token keyword">where</span> <span class="token builtin">range</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token hvariable">a</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token hvariable">a</span> <span class="token operator">+</span> <span class="token hvariable">s</span><span class="token operator">..</span><span class="token hvariable">a</span><span class="token punctuation">]</span> <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token constant">Double</span><span class="token punctuation">]</span>
<span class="token hvariable">add</span> <span class="token punctuation">(</span><span class="token hvariable">x1</span><span class="token punctuation">,</span> <span class="token hvariable">y1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token hvariable">x2</span><span class="token punctuation">,</span> <span class="token hvariable">y2</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token hvariable">x1</span> <span class="token operator">+</span> <span class="token hvariable">x2</span><span class="token punctuation">,</span> <span class="token hvariable">y1</span> <span class="token operator">+</span> <span class="token hvariable">y2</span><span class="token punctuation">)</span>

<span class="token hvariable">ef</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token punctuation">,</span> <span class="token hvariable">y</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">efield</span> <span class="token number">1</span> <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">-</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token hvariable">y</span> <span class="token operator">`add`</span> <span class="token hvariable">efield</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token hvariable">y</span>
<span class="token hvariable">bf</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token punctuation">,</span> <span class="token hvariable">y</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">bfield</span> <span class="token number">1</span> <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">-</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token hvariable">y</span> <span class="token operator">`add`</span> <span class="token hvariable">bfield</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token hvariable">y</span>
<span class="token hvariable">grid</span> <span class="token operator">=</span> <span class="token hvariable">square</span> <span class="token number">30</span> <span class="token number">3</span>

<span class="token hvariable">vectorField</span> <span class="token hvariable">title</span> <span class="token hvariable">f</span> <span class="token hvariable">grid</span> <span class="token operator">=</span> <span class="token builtin">fmap</span> <span class="token hvariable">E.plotVectorField</span> <span class="token operator">$</span> <span class="token hvariable">E.liftEC</span> <span class="token operator">$</span> <span class="token keyword">do</span>
    <span class="token hvariable">c</span> <span class="token operator">&lt;-</span> <span class="token hvariable">E.takeColor</span>
    <span class="token hvariable">E.plot_vectors_mapf</span> <span class="token constant">E</span><span class="token operator">..=</span> <span class="token hvariable">f</span>
    <span class="token hvariable">E.plot_vectors_grid</span> <span class="token constant">E</span><span class="token operator">..=</span> <span class="token hvariable">grid</span>
    <span class="token hvariable">E.plot_vectors_style</span><span class="token operator"> . </span><span class="token hvariable">E.vector_line_style</span><span class="token operator"> . </span><span class="token hvariable">E.line_color</span> <span class="token constant">E</span><span class="token operator">..=</span> <span class="token hvariable">c</span>
    <span class="token hvariable">E.plot_vectors_style</span><span class="token operator"> . </span><span class="token hvariable">E.vector_head_style</span><span class="token operator"> . </span><span class="token hvariable">E.point_color</span> <span class="token constant">E</span><span class="token operator">..=</span> <span class="token hvariable">c</span>
    <span class="token hvariable">E.plot_vectors_title</span> <span class="token constant">E</span><span class="token operator">..=</span> <span class="token hvariable">title</span>

<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token hvariable">E.toRenderable</span> <span class="token operator">$</span> <span class="token keyword">do</span>
    <span class="token hvariable">E.setColors</span> <span class="token punctuation">[</span><span class="token hvariable">E.opaque</span> <span class="token hvariable">E.black</span><span class="token punctuation">,</span> <span class="token hvariable">E.opaque</span> <span class="token hvariable">E.blue</span><span class="token punctuation">]</span>

    <span class="token hvariable">E.layout_title</span> <span class="token constant">E</span><span class="token operator">..=</span> <span class="token string">&quot;Positive and Negative Charges&quot;</span>
    <span class="token hvariable">E.plot</span> <span class="token operator">$</span> <span class="token hvariable">vectorField</span> <span class="token string">&quot;Electric Field&quot;</span> <span class="token hvariable">ef</span> <span class="token hvariable">grid</span>
    <span class="token hvariable">E.plot</span> <span class="token operator">$</span> <span class="token hvariable">vectorField</span> <span class="token string">&quot;B-field&quot;</span> <span class="token hvariable">bf</span> <span class="token hvariable">grid</span>
<span class="token hvariable">main</span>
</code></pre></div><p><img src="/assets/posts/ihaskell-field.svg" alt="field"></p> <h2 id="ihaskell-diagrams"><a href="#ihaskell-diagrams" class="header-anchor">#</a> ihaskell-diagrams</h2> <p><a href="http://projects.haskell.org/diagrams/" target="_blank" rel="noopener noreferrer">Diagrams<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a <em>&quot;powerful, flexible, declarative domain-specific language for creating vector graphics&quot;</em>. That is, it provides a flexible embedded DSL used to describe vectorized figures that you can then render using different backends.</p> <div class="language-haskell extra-class"><pre class="language-haskell"><code><span class="token operator">:</span><span class="token hvariable">extension</span> <span class="token constant">NoMonomorphismRestriction</span>
<span class="token operator">:</span><span class="token hvariable">extension</span> <span class="token constant">FlexibleContexts</span>
<span class="token operator">:</span><span class="token hvariable">extension</span> <span class="token constant">GADTs</span>

<span class="token import_statement"><span class="token keyword">import</span> <span class="token keyword">qualified</span> Diagrams.Prelude <span class="token keyword">as</span> D</span>
<span class="token import_statement"><span class="token keyword">import</span> <span class="token keyword">qualified</span> Diagrams.TwoD.Sunburst <span class="token keyword">as</span> S</span>
<span class="token import_statement"><span class="token keyword">import</span> Data.Tree</span> <span class="token punctuation">(</span><span class="token hvariable">unfoldTree</span><span class="token punctuation">)</span>

<span class="token hvariable">aTree</span> <span class="token operator">=</span> <span class="token hvariable">unfoldTree</span> <span class="token punctuation">(</span><span class="token operator">\</span><span class="token hvariable">n</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">replicate</span> <span class="token hvariable">n</span> <span class="token punctuation">(</span><span class="token hvariable">n</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token number">6</span>
<span class="token hvariable">diagram</span> <span class="token operator">$</span> <span class="token hvariable">S.sunburst</span> <span class="token hvariable">aTree</span> <span class="token constant">D</span><span class="token operator">.#</span> <span class="token hvariable">D.centerXY</span> <span class="token constant">D</span><span class="token operator">.#</span> <span class="token hvariable">D.pad</span> <span class="token number">1.1</span>
</code></pre></div><p><img src="/assets/posts/ihaskell-diagram1.svg" alt="field"></p> <div class="language-haskell extra-class"><pre class="language-haskell"><code><span class="token comment">-- import Diagrams.Backend.SVG.CmdLine as</span>
<span class="token import_statement"><span class="token keyword">import</span> <span class="token keyword">qualified</span> Diagrams.Prelude <span class="token keyword">as</span> D</span>
<span class="token import_statement"><span class="token keyword">import</span> <span class="token keyword">qualified</span> Diagrams.TwoD.Factorization <span class="token keyword">as</span> F</span>

<span class="token hvariable">diagram</span> <span class="token operator">$</span> <span class="token hvariable">F.fdGridList</span> <span class="token number">6</span> <span class="token constant">D</span><span class="token operator">.#</span> <span class="token hvariable">D.center</span> <span class="token constant">D</span><span class="token operator">.#</span> <span class="token hvariable">D.pad</span> <span class="token number">1.05</span>
</code></pre></div><p><img src="/assets/posts/ihaskell-diagram2.svg" alt="field"></p> <h2 id="ihaskell-magic"><a href="#ihaskell-magic" class="header-anchor">#</a> ihaskell-magic</h2> <p>In this case, libmagic is used to determine type of files using magic
values at the beginning, which allows us to display binary content in
notebooks, in the right way. For example, if we want to display an
image (png, jpeg, svg, etc.), we just have to read its content as a
<code>ByteString</code>, then <code>libmagic</code> is used behind the scene by <em>IHaskell</em> to
determine what kind of content it is, based on the magic bytes present
in the file, and then inline it in the notebook.</p> <p>What is important to understand here, is that an instance of
IHaskellDisplay is defined for both <code>ByteString</code> and <code>Text</code>, in case
this strings represent something else than text (images, for example),
<em>IHaskell</em> is able to know it thanks to <code>libmagic</code> and display the content
accordingly, otherwise, it just displays the string.</p> <div class="language-haskell extra-class"><pre class="language-haskell"><code><span class="token import_statement"><span class="token keyword">import</span> <span class="token keyword">qualified</span> Data.ByteString <span class="token keyword">as</span> B</span>
<span class="token constant">B</span><span class="token punctuation">.</span><span class="token builtin">readFile</span> <span class="token string">&quot;./haskell-logo.png&quot;</span>
</code></pre></div><p><img src="/assets/posts/output_25_0.png" alt="Haskell logo"></p> <div class="language-haskell extra-class"><pre class="language-haskell"><code><span class="token operator">:</span><span class="token hvariable">extension</span> <span class="token constant">OverloadedStrings</span>
<span class="token import_statement"><span class="token keyword">import</span> <span class="token keyword">qualified</span> Data.ByteString <span class="token keyword">as</span> B</span>
<span class="token string">&quot;This is a string of type ByteString&quot;</span> <span class="token operator">::</span> <span class="token constant">B.ByteString</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code>This is a string of <span class="token builtin class-name">type</span> ByteString
</code></pre></div><div class="language-haskell extra-class"><pre class="language-haskell"><code><span class="token operator">:</span><span class="token hvariable">extension</span> <span class="token constant">OverloadedStrings</span>
<span class="token import_statement"><span class="token keyword">import</span> <span class="token keyword">qualified</span> Data.Text <span class="token keyword">as</span> T</span>
<span class="token string">&quot;This is a string of type Text&quot;</span> <span class="token operator">::</span> <span class="token constant">T.Text</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code>This is a string of <span class="token builtin class-name">type</span> Text
</code></pre></div><h2 id="ihaskell-static-canvas"><a href="#ihaskell-static-canvas" class="header-anchor">#</a> ihaskell-static-canvas</h2> <p>Following on the <a href="https://github.com/gibiansky/IHaskell/blob/master/notebooks/Static%20Canvas%20IHaskell%20Display.ipynb" target="_blank" rel="noopener noreferrer">excellent introduction<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
from the author of <em>IHaskell</em>. Let's try to use
<a href="https://github.com/jeffreyrosenbluth/static-canvas" target="_blank" rel="noopener noreferrer">static-canvas<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to
create more elaborate inlings in notebooks! The github page is full
of <a href="">examples</a> that we can try out right now. But before that, we
must create an instance of <code>IHaskellDisplay</code> for <code>CanvasFree</code> (which
is taken directly from the mentionned tutorial (I hope it's Ok, since
<code>ihaskell-static-canvas</code> doesn't seem to be part of Stackage LTS at the
moment).</p> <div class="language-haskell extra-class"><pre class="language-haskell"><code><span class="token import_statement"><span class="token keyword">import</span> IHaskell.Display</span> <span class="token comment">-- From the 'ihaskell' package.</span>
<span class="token import_statement"><span class="token keyword">import</span> IHaskell.IPython.Types</span> <span class="token punctuation">(</span><span class="token constant">MimeType</span><span class="token punctuation">(</span><span class="token operator">..</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token import_statement"><span class="token keyword">import</span> Graphics.Static</span>  <span class="token comment">-- From the 'static-canvas' package.</span>

<span class="token comment">-- Text conversion functions.</span>
<span class="token import_statement"><span class="token keyword">import</span> Data.Text.Lazy.Builder</span> <span class="token punctuation">(</span><span class="token hvariable">toLazyText</span><span class="token punctuation">)</span>
<span class="token import_statement"><span class="token keyword">import</span> Data.Text.Lazy</span> <span class="token punctuation">(</span><span class="token hvariable">toStrict</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-haskell extra-class"><pre class="language-haskell"><code><span class="token comment">-- Since CanvasFree is a type synonym, we need a language pragma.</span>
<span class="token operator">:</span><span class="token hvariable">extension</span> <span class="token constant">TypeSynonymInstances</span>
<span class="token operator">:</span><span class="token hvariable">extension</span> <span class="token constant">FlexibleInstances</span>

<span class="token keyword">instance</span> <span class="token constant">IHaskellDisplay</span> <span class="token punctuation">(</span><span class="token constant">CanvasFree</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">where</span>
  <span class="token comment">-- display :: CanvasFree () -&gt; IO Display</span>
  <span class="token hvariable">display</span> <span class="token hvariable">canvas</span> <span class="token operator">=</span> <span class="token builtin">return</span> <span class="token operator">$</span>
    <span class="token keyword">let</span> <span class="token hvariable">src</span> <span class="token operator">=</span> <span class="token hvariable">toStrict</span>
      <span class="token operator">$</span> <span class="token hvariable">toLazyText</span>
      <span class="token operator">$</span> <span class="token hvariable">buildScript</span> <span class="token hvariable">width</span> <span class="token hvariable">height</span> <span class="token hvariable">canvas</span>
    <span class="token keyword">in</span> <span class="token constant">Display</span> <span class="token punctuation">[</span><span class="token constant">DisplayData</span> <span class="token constant">MimeHtml</span> <span class="token hvariable">src</span><span class="token punctuation">]</span>
    <span class="token keyword">where</span> <span class="token punctuation">(</span><span class="token hvariable">height</span><span class="token punctuation">,</span> <span class="token hvariable">width</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span>
</code></pre></div><p>Now let's try some example:</p> <div class="language-haskell extra-class"><pre class="language-haskell"><code><span class="token import_statement"><span class="token keyword">import</span> Graphics.Static</span>
<span class="token import_statement"><span class="token keyword">import</span> Graphics.Static.ColorNames</span>

<span class="token hvariable">text</span> <span class="token operator">::</span> <span class="token constant">CanvasFree</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token hvariable">text</span> <span class="token operator">=</span> <span class="token keyword">do</span>
  <span class="token hvariable">font</span> <span class="token string">&quot;italic 60pt Calibri&quot;</span>
  <span class="token hvariable">lineWidth</span> <span class="token number">6</span>
  <span class="token hvariable">strokeStyle</span> <span class="token hvariable">blue</span>
  <span class="token hvariable">fillStyle</span> <span class="token hvariable">goldenrod</span>
  <span class="token hvariable">textBaseline</span> <span class="token constant">TextBaselineMiddle</span>
  <span class="token hvariable">strokeText</span> <span class="token string">&quot;Haskell&quot;</span> <span class="token number">150</span> <span class="token number">100</span>
  <span class="token hvariable">fillText</span> <span class="token string">&quot;Haskell!&quot;</span> <span class="token number">150</span> <span class="token number">100</span>

<span class="token hvariable">text</span>
</code></pre></div><p><img src="/assets/posts/ihaskell-canvas.png" alt=""></p> <h2 id="conclusion"><a href="#conclusion" class="header-anchor">#</a> Conclusion</h2> <p>This was a short introduction without much new stuff, but it gave me a
better understanding on how <em>IHaskell</em> (and in a way, <em>Jupyter</em>) works.
Thanks to the awesome work of some haskellers, we are able to benefit
from the great <em>Jupyter</em> ecosystem, and I think it can bring a lot to
<em>Haskell</em> itself. It's easier to share code, easier to write about
<em>Haskell</em>-related stuff, easier to dig into a new projet.</p> <p><em>IHaskell</em> is a solid foundation for more to come: more widgets, more
integrations with <em>Haskell</em> libraries, etc. I wonder if, for example, we
could use <em>Blaze</em> to generate <em>Display</em> on-the-fly? Could we reuse some
code from the <em>Python</em> Kernel of <em>Jupyter</em>? I'm also looking forward to
try the <code>ihaskell-widgets</code> extension.</p> <p>That's pretty much it, I'd like to say I'm very excited for Haskell,
because it becomes much more accessible for newcomers, thanks to (for
example) Stack, IHaskell, and lot of effort that is being made by the
community. I hope I can continue to contribute at my level to this
effort!</p> <p>Thanks for reading!</p></div> <div class="post-meta" data-v-1c1f12bb><!----> <!----> <div itemprop="keywords" class="card-subheading post-meta-tags"><a href="/tag/Haskell" data-v-43160e8a> Haskell </a><a href="/tag/Code" data-v-43160e8a> Code </a></div></div></div></div></article> <div class="row justify-content-center" data-v-1c1f12bb><div class="col-md-9" data-v-1c1f12bb><form class="newsletter" data-v-1c1f12bb><div class="newsletter__wrap"><div class="newsletter__title">Newsletter</div> <div class="newsletter__content">Subscribe to get my latest content. No spam.</div> <div class="newsletter__fields"><input type="email" name="email" aria-label="Email" placeholder="Email" required="required" autocapitalize="off" autocorrect="off" data-cy="email" value="" class="newsletter__input"> <button type="submit" data-cy="submit" class="newsletter__button">
        Subscribe
      </button></div></div></form> <!----></div></div> <div class="sticker vuepress-toc" data-v-1c1f12bb><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#introduction" title="Introduction">Introduction</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#how-does-it-work" title="How does it work?">How does it work?</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ihaskell-basic" title="ihaskell-basic">ihaskell-basic</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ihaskell-aeson" title="ihaskell-aeson">ihaskell-aeson</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ihaskell-blaze" title="ihaskell-blaze">ihaskell-blaze</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ihaskell-charts" title="ihaskell-charts">ihaskell-charts</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ihaskell-diagrams" title="ihaskell-diagrams">ihaskell-diagrams</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ihaskell-magic" title="ihaskell-magic">ihaskell-magic</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ihaskell-static-canvas" title="ihaskell-static-canvas">ihaskell-static-canvas</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#conclusion" title="Conclusion">Conclusion</a></div></div></div></div> <footer class="themefooter"><div class="container"><div class="row justify-content-between"><div class="col"><a href="/"><img src="/assets/img/logo.png" class="logofooter"></a></div> <div class="col"></div> <div class="col"></div> <div class="col text-right"><ul class="list-unstyled"><li class="contact-item"><a href="https://github.com/mawuen" target="_blank" rel="noopener noreferrer" class="external"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>

</a></li></ul> <ul class="list-unstyled"><li class="copyright-item"><a href="/2015/02/05/haskell-extension/.html#">Licensed MIT.</a></li><li class="copyright-item"><a href="/">Made with ❤ in  Africa</a></li></ul></div></div></div></footer></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.a645ad51.js" defer></script><script src="/assets/js/7.975a3fea.js" defer></script><script src="/assets/js/3.f5cf5793.js" defer></script><script src="/assets/js/43.0cf3c2e7.js" defer></script><script src="/assets/js/5.99340dc9.js" defer></script><script src="/assets/js/8.49b41bc0.js" defer></script>
  </body>
</html>
