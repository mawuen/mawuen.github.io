(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{495:function(e,t,n){"use strict";n.r(t);var s=n(7),i=Object(s.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"introduction"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[e._v("#")]),e._v(" Introduction")]),e._v(" "),n("p",[e._v("J'inaugure ce blog avec un article sur "),n("a",{attrs:{href:"https://pypy.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Pypy"),n("OutboundLink")],1),e._v(", une impl√©mentation de\nPython tr√®s int√©ressante du point de vue des performances puisque,\ncomme nous le verrons un peu plus bas, il est possible de rivaliser avec\ndes langages compil√©s statiquement tels que le C ou le C++. L'article\nse d√©composera de la fa√ßon suivante :")]),e._v(" "),n("ol",[n("li",[e._v("Qu'est-ce que Python.")]),e._v(" "),n("li",[e._v("Quelles sont les diff√©rentes impl√©mentation ?")]),e._v(" "),n("li",[e._v("Qu'est-ce qui caract√©rise Pypy ?")]),e._v(" "),n("li",[e._v("La compilation JIT (Just-In-Time).")]),e._v(" "),n("li",[e._v("Compiler et utiliser Pypy.")]),e._v(" "),n("li",[e._v("Bref aper√ßu des performances.")])]),e._v(" "),n("h2",{attrs:{id:"qu-est-ce-que-python"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#qu-est-ce-que-python"}},[e._v("#")]),e._v(" Qu'est ce que Python")]),e._v(" "),n("p",[e._v("Python est un langage de programmation moderne class√© dans la\ncat√©gorie des langages de scripts (il est interpr√©t√©, du moins dans\nson impl√©mentation officielle, CPython). √âtant tr√®s haut niveau, il\npermet aux d√©veloppeurs de gagner en productivit√© en leur permettant\nde se d√©tacher au maximum des contraintes bas niveaux que l'on peut\nretrouver sur d'autres langages tels que le C, ce qui en fait un\nlangage adapt√© pour l'apprentissage de la programmation. En effet,\nil est facile d'acc√®s et rapide √† apprendre. Sa syntaxe, bas√©e\nsur l'indentation (pas d'accolades ni de mot-cl√© pour s√©parer\nles ¬´ blocs ¬ª d'instruction) le rend plus lisible que la plupart\ndes langages. Pour terminer, voici quelques sp√©cificit√©s du langage\n: Inf√©rence de type, fonctionnalit√©s objet avanc√©es, type entier de\ntaille arbitraire, compr√©hension de listes permettant de cr√©er des\nlistes de mani√®re √©l√©gante, etc ..")]),e._v(" "),n("h2",{attrs:{id:"quelles-sont-les-differentes-implementations"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#quelles-sont-les-differentes-implementations"}},[e._v("#")]),e._v(" Quelles sont les diff√©rentes impl√©mentations")]),e._v(" "),n("p",[e._v("Le langage Python √©tant plac√© sous licence libre, il en existe de\nnombreuses impl√©mentations ayant chacune leurs sp√©cificit√©s. En voici\nquelques-unes :")]),e._v(" "),n("ol",[n("li",[n("em",[e._v("CPython")]),e._v(" : Impl√©mentation officielle (la plus connue) √©crite en C.")]),e._v(" "),n("li",[n("em",[e._v("Pypy")]),e._v(" : Impl√©mentation disposant d'un compilateur JIT (Just-In-Time).")]),e._v(" "),n("li",[n("em",[e._v("ShedSkin")]),e._v(" : Impl√©mentation disposant d'un compilateur\nPython-to-C++ et offrant des performances tr√®s int√©ressantes du point\nde vu du temps d'ex√©cution.")]),e._v(" "),n("li",[n("em",[e._v("Stackless")]),e._v(" : Impl√©mentation qui se passe de la pile d'appels du\nC en la rempla√ßant par une structure de donn√©es propre au Python.\nCette impl√©mentation est grandement bas√©e sur le paradigme de la\nconcurrence, faisant appel √† des Tasklets (sorte de micro-threads)\nafin de simuler une ex√©cution parall√®le des programmes. Les Tasklets\npeuvent √™tre cr√©√©es par centaines (voire milliers), communiquer entre\nelles facilement, √™tre mise en pause ou r√©veill√©es instantan√©ment,\netc ..")]),e._v(" "),n("li",[n("em",[e._v("Jython")]),e._v(" : Impl√©mentation √©crite en Java.")]),e._v(" "),n("li",[n("em",[e._v("Iron Python")]),e._v(" : Impl√©mentation √©crite en C#.")])]),e._v(" "),n("h2",{attrs:{id:"qu-est-ce-qui-caracterise-pypy"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#qu-est-ce-qui-caracterise-pypy"}},[e._v("#")]),e._v(" Qu'est-ce qui caract√©rise Pypy")]),e._v(" "),n("p",[e._v("Pypy est une impl√©mentation de Python, √©crite en Python, et proposant\n(entre autres), un compilateur JIT (cf paragraphe suivant) lui\npermettant de d√©livrer des performances dignes de la plupart des\nlangages compil√©s statiquement (C, C++, etc..). Pypy offre √©galement\nune consommation m√©moire r√©duite par rapport √† CPython, et supporte\nla plupart des biblioth√®ques disponibles avec l'impl√©mentation\nofficielle.")]),e._v(" "),n("p",[e._v("Il est √©galement possible de compiler Pypy pour obtenir une version\nSandBox ou Stackless de Python. D'autres langages sont √©galement\nsupport√©s par Pypy (Javascript, Scheme, etc..) puisque ce dernier\nutilise une chaine de traitement qui peut analyser des programmes\n√©crits en RPython (un subset r√©duit du langage Python), les\ntraduire en code C puis les compiler en code machine, ce qui permet\n√† n'importe quel langage d'√™tre utilis√© avec Pypy √† condition\nqu'ils puissent √™tre traduit en RPython. Pour plus d'informations,\nje vous invite √† consulter le site officiel de Pypy dont le lien est\ncommuniqu√© en fin d'article.")]),e._v(" "),n("h2",{attrs:{id:"la-compilation-jit-just-in-time"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#la-compilation-jit-just-in-time"}},[e._v("#")]),e._v(" La compilation JIT (Just-In-Time)")]),e._v(" "),n("p",[e._v("Le langage Python offrant des outils tr√®s haut niveau (tels que des\nfonctionnalit√©s Objet avanc√©es), il est difficile et globalement\ninefficace (comparativement √† des langages plus bas niveaux tels que le\nC) de le compiler statiquement, on ne se tournera donc pas vers de la\ncompilation statique si l'on recherche des performances honorables. Il\nexiste heureusement une alternative tr√®s performante √† la compilation\nstatique, il s'agit de la compilation JIT (Just-In-Time, ou ¬´ √† la\nvol√©e ¬ª). C'est cette technologie qui est utilis√©e dans le projet\nPypy, ce qui permet d'offrir au langage Python des performances dignes\nde langages compil√©s statiquement tels que le C ou le C++. Voyons de\nquoi il s'agit.")]),e._v(" "),n("p",[e._v("La compilation Just-In-Time (ou dynamique) repr√©sente une approche\nhybride entre la compilation statique et l'interpr√©tation, elle a\npour but d'obtenir des performance √©gales, voire sup√©rieures, √† la\ncompilation statique classique. Les compilateurs JIT convertissent du\nBytecode en code machine √† la vol√©e (au moment de l'ex√©cution).\nMais pour limiter la d√©gradation des performances, plusieurs techniques\nsont utilis√©es. Premi√®rement, il est possible de mettre en cache\ncertaines parties d'un programme afin de ne pas avoir √† les\nretraduire inutilement lors d'ex√©cutions ult√©rieures si leur code\nsource n'a pas √©t√© modifi√© entre temps. Deuxi√®mement, gr√¢ce √†\nun syst√®me de d√©tection des points chauds (parties d'un programmes\n√©tant tr√®s sollicit√©es lors de l'ex√©cution), le compilateur peut\nd√©cider de traduire une partie du programme en code machine si cela\ns'av√®re plus int√©ressant qu'une simple interpr√©tation en terme de\ntemps d'ex√©cution.")]),e._v(" "),n("p",[e._v("De plus, de nombreuses optimisations ne sont possibles qu'au moment\nde l'ex√©cution du programme. Un compilateur JIT peut donc utiliser\nles informations du contexte d'ex√©cution afin d'am√©liorer les\nperformance d'un programme. Notamment, il est possible d'adapter le\ncode machine produit en fonction de l'architecture du processeur ou\nencore d'effectuer de l'inlining de biblioth√®ques dynamiques, sans\nperdre pour autant les avantages du linkage dynamique.")]),e._v(" "),n("p",[e._v("La compilation JIT est utilis√©e par la machine virtuelle du Java ou\nencore le C#.")]),e._v(" "),n("h2",{attrs:{id:"compiler-et-utiliser-pypy"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#compiler-et-utiliser-pypy"}},[e._v("#")]),e._v(" Compiler et utiliser Pypy")]),e._v(" "),n("p",[e._v("Il existe deux solutions pour utiliser Pypy. Soit votre distribution\nLinux favorite vous le propose directement depuis ses d√©p√¥ts, auquel\ncas il vous suffit de l'installer, soit vous pouvez t√©l√©charger\nles sources depuis le mercurial de Pypy. Attention n√©anmoins, si\nvous installez Pypy depuis les d√©p√¥ts de votre distribution, il est\npossible qu'il remplace une version existante de Python sur votre\nordinateur.")]),e._v(" "),n("p",[n("em",[e._v("Building from sources")]),e._v(" : Nous allons voir ici comment t√©l√©charger les\nsources de Pypy, les compiler puis utiliser le binaire produit. Avant\ntoute chose, il faut savoir que la compilation de Pypy est extr√™mement\ngourmande en ressources (m√©moire vive et CPU), si vous n'avez pas\n4 Go de RAM sur votre PC, il faudra passer par les d√©p√¥ts de votre\ndistribution, sans quoi vous risquez de partir en Swap infini ..")]),e._v(" "),n("p",[n("em",[e._v("Liste des d√©pendances")]),e._v(" : "),n("a",{attrs:{href:"http://pypy.readthedocs.org/en/latest/getting-started-python.html#translating-the-pypy-python-interpreter",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://pypy.readthedocs.org/en/latest/getting-started-python.html#translating-the-pypy-python-interpreter"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("Une fois toutes les d√©pendances install√©es, r√©cup√©rez les sources de\nPypy en lan√ßant la commande suivant :")]),e._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[e._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[e._v("hg")]),e._v(" clone https://bitbucket.org/pypy/pypy\n")])])]),n("p",[e._v("Rendez-vous ensuite dans le r√©pertoire goal :")]),e._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[e._v("$ "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" pypy/pypy/translator/goal\n")])])]),n("p",[e._v("Lancez enfin le script avec Python (ou avec Pypy lui-m√™me si vous\nl'avez d√©j√† install√©, ce qui vous fera √©conomiser du temps et de\nla m√©moire) :")]),e._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[e._v("$ python2 translate.py -Ojit\n")])])]),n("p",[e._v("Vous appr√©cierez au passage les fractales de Mandelbrot qui seront\ndessin√©es dans votre terminal pendant la compilation.")]),e._v(" "),n("p",[e._v("Une fois le long processus termin√©, un binaire nomm√© pypy-c est\nnormalement pr√©sent dans le r√©pertoire. Vous pouvez le renommer et/ou\nle d√©placer afin de l'utiliser comme bon vous semble. Il remplace le\nbinaire Python traditionnel, vous pouvez donc l'utiliser de la fa√ßon\nsuivante :")]),e._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[e._v("$ ./pypy mon_script.py "),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# votre script python")]),e._v("\n")])])]),n("h2",{attrs:{id:"bref-apercu-des-performances"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#bref-apercu-des-performances"}},[e._v("#")]),e._v(" Bref aper√ßu des performances")]),e._v(" "),n("p",[e._v("Pour terminer, voici un bref aper√ßu des performances de Pypy\ncomparativement √† d'autres impl√©mentations/langages disponible sur\nla page Performance officielle du site de Pypy : "),n("a",{attrs:{href:"http://speed.pypy.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://speed.pypy.org/"),n("OutboundLink")],1)]),e._v(" "),n("h2",{attrs:{id:"bibliographie"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#bibliographie"}},[e._v("#")]),e._v(" Bibliographie")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"http://pypy.org/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://pypy.org/index.html"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"http://fr.wikipedia.org/wiki/PyPy",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://fr.wikipedia.org/wiki/PyPy"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"http://en.wikipedia.org/wiki/PyPy",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://en.wikipedia.org/wiki/PyPy"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"http://en.wikipedia.org/wiki/Just-in-time_compilation",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://en.wikipedia.org/wiki/Just-in-time_compilation"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"http://www.python.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://www.python.org/"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"http://fr.wikibooks.org/wiki/Python",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://fr.wikibooks.org/wiki/Python"),n("OutboundLink")],1)])]),e._v(" "),n("p",[e._v("Le mot de la fin---Toutes les propositions et remarques sont bien\n√©videmment les bienvenues üòÉ")])])}),[],!1,null,null,null);t.default=i.exports}}]);